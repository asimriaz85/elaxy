gumtree.GumAutoComplete=function(C){var A=this,B;if(!(this instanceof (gumtree.GumAutoComplete))){return new gumtree.GumAutoComplete(C)}this.inputField=$(C.field);this.service=C.service;this.serviceSuffix=C.serviceSuffix;this.resultsKeyWrapper=C.resultsKeyWrapper;this.resultskey=C.resultsKey;this.divWrapperName=C.divWrapperName;this.divItemWrapperName=C.divItemWrapperName;this.buildQuery=C.buildQuery;this.onReceipt=C.onReceipt;this.isVisible=false;this.isReady=false;this.isLoadInitialised=false;this.prevTerm="";this.ajaxQueue=[];this.inputField.bind("keydown",function(E){var D=E.keyCode,G=13,F=9;if(D===G||D===F){if(A.isVisible){A.hideList();if(D===G){E.preventDefault()}}}});this.inputField.bind("keyup click",function(F){var E=A.getMembers();var D=A.getActiveMember();if(D.length===0){A.prevTerm=A.inputField.val()}if(F.keyCode===40){A.showList();if(D.length<1||D===E.eq(E.length-1)){D.trigger("blur");E.eq(0).trigger("focus");A.inputField.val(E.eq(0).text())}else{if(D.next().length>0){D.trigger("blur");D.next().trigger("focus");A.inputField.val(D.next().text())}else{D.trigger("blur");A.inputField.val(A.prevTerm)}}F.preventDefault()}else{if(F.keyCode===38){A.showList();if(D.length<1||D===E.eq(0)){D.trigger("blur");E.eq(E.length-1).trigger("focus");A.inputField.val(E.eq(E.length-1).text())}else{if(D.prev().length>0){D.trigger("blur");D.prev().trigger("focus");A.inputField.val(D.prev().text())}else{D.trigger("blur");A.inputField.val(A.prevTerm)}}F.preventDefault()}else{if(F.keyCode===13){}else{if(F.keyCode===9){if(A.getActiveMember().length===0){A.onChangeInput()}}else{A.onChangeInput()}}}}});this.searchTerm="";this.preWrap='<span class="'+C.highlightClass+'">';this.postWrap="</span>";this.autoCompleteWrapper=$("body").append('<div id="'+this.divWrapperName+'" style="position:absolute; display:none; z-index:10; "></div>');this.autoCompleteWrapper=$("#"+this.divWrapperName);this.positionMe();this.setListWidth();$(window).bind("resize.GumAutoComplete",function(){A.positionMe();A.setListWidth()});this.autoCompleteWrapper.bind("click",function(D){var E;if($(D.target).hasClass(C.highlightClass)){E=$(D.target).parent().text()}else{E=$(D.target).text()}A.inputField.val(E);A.inputField.focus();A.hideList()});$(document).bind("click.GumAutoComplete",function(E){var D=($(E.target).hasClass(A.divItemWrapperName)||E.target===A.inputField.get(0));if(!D){A.hideList()}})};gumtree.GumAutoComplete.prototype.focusOption=function(A){};gumtree.GumAutoComplete.prototype.positionMe=function(){var A=this.inputField.offset();A.top+=this.inputField.height();this.autoCompleteWrapper.css({top:Math.floor(A.top)+"px",left:Math.floor(A.left)+"px"})};gumtree.GumAutoComplete.prototype.setListWidth=function(){var A=this.inputField.innerWidth();this.autoCompleteWrapper.width(A)};gumtree.GumAutoComplete.prototype.getMembers=function(){return this.autoCompleteWrapper.find("."+this.divItemWrapperName)};gumtree.GumAutoComplete.prototype.getActiveMember=function(){return this.autoCompleteWrapper.find("."+this.divItemWrapperName+".hovered")};gumtree.GumAutoComplete.prototype.hideList=function(){this.isVisible=false;this.autoCompleteWrapper.hide()};gumtree.GumAutoComplete.prototype.showList=function(){this.isVisible=true;this.autoCompleteWrapper.show()};gumtree.GumAutoComplete.prototype.onChangeInput=function(){var A=this;this.isLoadInitialised=false;this.isReady=false;this.searchTerm=A.inputField.val();if(this.searchTerm.length>0){if(A.searchTerm.length>0){if(A.ajaxQueue.length>1){A.ajaxQueue.length=1}A.ajaxQueue.push(A.prepareDataRequest());if(!this.jsonRequest){A.processQueue()}}}else{this.hideList()}};gumtree.GumAutoComplete.prototype.prepareDataRequest=function(){var B=this,A;this.isLoadInitialised=true;A={url:this.doBuildQuery(),dataType:"json",timeout:1000,complete:function(){B.processQueue()},success:function(C){B.doOnReceipt(C)}};return A};gumtree.GumAutoComplete.prototype.processQueue=function(){var A=this;if(this.ajaxQueue.length>0){this.jsonRequest=function(){$.ajax(A.ajaxQueue.shift())}()}else{delete this.jsonRequest}};gumtree.GumAutoComplete.prototype.doBuildQuery=function(){var A=this.buildQuery.apply(this,[this.searchTerm]);return A};gumtree.GumAutoComplete.prototype.doOnReceipt=function(H){var I,E,A,M="",D,C,F,B,J,G,L,K=this.searchTerm;if(K.length>0&&H[this.resultsKeyWrapper]){this.showList();$("#"+this.divWrapperName).empty();for(I=0,E=H[this.resultsKeyWrapper].length;I<E;I++){J=new RegExp(this.searchTerm,"ig"),A=H[this.resultsKeyWrapper][I][this.resultskey];M=A;G="";L="";F=0;B=0;while(C=J.exec(A)){G=M.substring(F);L=M.substring(0,F);G=G.split("");G.splice(((C.index+this.searchTerm.length)-B),0,this.postWrap);G.splice((C.index-B),0,this.preWrap);M=L+G.join("");F+=this.preWrap.length+this.postWrap.length+this.searchTerm.length;B=B+this.searchTerm.length}D=$('<div class="'+this.divItemWrapperName+'">'+M+"</div>");D.bind("focus mouseover",function(){$(this).siblings().trigger("blur");$(this).addClass("hovered")});D.bind("blur mouseout",function(){$(this).removeClass("hovered")});$("#"+this.divWrapperName).append(D)}this.isReady=true}else{this.hideList()}return true};gumtree.GumMenuDropdown=function(C){if(!(this instanceof (gumtree.GumMenuDropdown))){return new gumtree.GumMenuDropdown(C)}var A=this,B;this.el=$(C.el);this.padXPos=C.padXPos||0;this.elSelector=C.el;this.autoCloseDelay=C.autoCloseDelay||false;this.positionChildrenInCenter=C.positionChildrenInCenter||false;this.submenuTriggers=this.el.find(".js_flyout-menu");this.submenus=this.submenuTriggers.next(".your-gumtree-secondary-dropdown");this.el.click(function(D){D.stopPropagation()});this.el.bind("mouseenter",function(){$(this).addClass("active");if(B){clearTimeout(B)}$(document).one("click.GumMenuDropdown",function(E){var D=$(E.target).hasClass(A.elSelector);if(!D){A.closeAllDropdowns()}});if(A.autoCloseDelay){A.el.one("mouseleave",function(D){var F=false,E=$(this).find("input");E.each(function(){if($(this).is(":focus")){F=true}});if(!F&&!$(D.target).hasClass(A.elSelector)){B=setTimeout(function(){A.closeAllDropdowns()},A.autoCloseDelay)}})}});this.el.find(">a").click(function(D){if(A.el.hasClass("active")){A.closeAllDropdowns()}else{A.el.trigger("mouseenter")}});if(C.convertHoversToClicks){this.convertHoversToClicks()}};gumtree.GumMenuDropdown.prototype.closeAllDropdowns=function(){this.hideAll();this.el.removeClass("active");this.el.trigger("mouseleave")};gumtree.GumMenuDropdown.prototype.convertHoversToClicks=function(){var A=this,B=function(D,C){D.css({"right":"auto","left":"50%","top":C.height()+"px","marginLeft":(-(D.outerWidth(true)/2)+A.padXPos)+"px"})};this.submenuTriggers.bind("click",function(){var C=$(this),D=C.next(".your-gumtree-secondary-dropdown");if(this.initialised===undefined){this.initialised=false}D.toggleClass("js-show");if(D.hasClass("js-show")){A.submenus.not(D).removeClass("js-show");if(A.positionChildrenInCenter&&!this.initialised){B(D,C);this.initialised=true}}return false})};gumtree.GumMenuDropdown.prototype.hideAll=function(){this.submenus.removeClass("js-show")};gumtree.GumAdManager=function(B){var A=this;if(!(this instanceof (gumtree.GumAdManager))){return new gumtree.GumAdManager(B)}this.statusSelector=$(B.statusSelector);this.parentStatuses=B.parentStatuses;this.fragmentService=B.fragmentService;this.cookieName=B.cookieName;this.cookieSplitDelimiter=B.cookieSplitDelimiter||B.cookieJoinDelimiter;this.cookieJoinDelimiter=B.cookieJoinDelimiter;this.cookiePrefix=B.cookiePrefix||"";this.totalCountSelector=$(B.totalCountSelector);this.adSelectorPrefix=B.adSelectorPrefix;this.adRemoveSelector=B.adRemoveSelector||null;this.adRemoveAllSelector=B.adRemoveAllSelector||null;this.adSaveSelector=B.adSaveSelector;this.onChangeDetect=B.onChangeDetect||function(){};this.onDeleteOne=B.onDeleteOne||function(C){C()};this.ajaxRequest=null;this.setup();this.runOnDeleteOne=function(C){C.displaySlots.each(function(){var D=function(){A.onChangeDetect.apply(A)};A.onDeleteOne.apply($(this),[D])})};this.runOnDeleteAll=function(C){gumtree.utils.eraseCookie(A.cookieName);A.onChangeDetect.apply(A,[C]);this.afterUpdate()}};gumtree.GumAdManager.prototype.setup=function(){var D,E,A,F,C,B=this;this.adRegistry=[];this.adIds=this.getAdsArray();for(D=0,A=this.adIds.length;D<A;D++){C=this.adIds[D];if(C){this.createAd(C)}}if(this.adRemoveSelector){$(this.adRemoveSelector).unbind("click.GumAdManager").bind("click.GumAdManager",function(K){K.preventDefault();var G=$(K.target),I=G.data("ad-id"),J=G.data("on-trigger-text"),H;for(E=0,F=B.adRegistry.length;E<F;E++){if(I==B.adRegistry[E].adId){H=B.adRegistry[E]}}if(H){B.deleteAd(H);if(J){G.text(J)}}});$(this.adRemoveSelector).each(function(){var J=$(this),G=J.data("ad-id"),H=B.getAd(G),I=J.data("on-init-text");if(!H){J.addClass("disabled")}else{J.removeClass("disabled")}if(I){J.text(I)}})}if(this.adSaveSelector){$(this.adSaveSelector).unbind("click.GumAdManager").bind("click.GumAdManager",function(K){K.preventDefault();var G=$(K.target),H=G.data("ad-id"),J=G.data("on-trigger-text"),I=B.getAd(H);if(!I&&H){B.saveAd(H);if(J){G.text(J)}}});$(this.adSaveSelector).each(function(){var J=$(this),G=J.data("ad-id"),H=B.getAd(G),I=J.data("on-init-text");if(H){J.addClass("disabled")}else{J.removeClass("disabled")}if(I){J.text(I)}})}if(this.adRemoveAllSelector){$(this.adRemoveAllSelector).unbind("click.GumAdManager").bind("click.GumAdManager",function(H){var G=$(this).data("load-ajax")===true?true:false;B.runOnDeleteAll(G);H.preventDefault()})}if(B.parentStatuses){this.statusSelector.children().each(function(){var I=$(this),H=I.val(),J=I.html(),G=new Array();if(jQuery.inArray(H,B.parentStatuses)==-1){I.html("&nbsp;&nbsp;&nbsp;"+J)}else{I.html("- "+J)}});this.statusSelector.attr("title",B.parentStatuses.join(","));$(document).trigger("setupGumAdManager")}this.afterUpdate()};gumtree.GumAdManager.prototype.createAd=function(A){var B=new gumtree.GumAdManager_Ad({manager:this,adId:A,adSelector:this.adSelectorPrefix+A.replace(this.cookiePrefix,"")});this.adRegistry.push(B)};gumtree.GumAdManager.prototype.getAd=function(B){var A=this.adRegistry.length,C;for(C=0;C<A;C++){if(this.adRegistry[C]["adId"]===B.toString()){return this.adRegistry[C]}}return false};gumtree.GumAdManager.prototype.getAdsArray=function(){var B=this.getAdsAsString(),A;if(B.length>0){A=B.split(this.cookieSplitDelimiter)}else{A=[]}return A};gumtree.GumAdManager.prototype.getAdsAsString=function(){var A=$.cookies.get(this.cookieName)||"";return A.toString()};gumtree.GumAdManager.prototype.afterUpdate=function(){var A=this;this.totalCountSelector.each(function(){$(this).text(A.getAdsArray().length)})};gumtree.GumAdManager.prototype.sanitizeCookie=function(A){var B=this.cookieJoinDelimiter.length;if(A.substring(A.length-B)===this.cookieJoinDelimiter){A=A.substring(0,A.length-B)}if(A.substring(0,B)===this.cookieJoinDelimiter){A=A.substring(B)}return A};gumtree.GumAdManager.prototype.deleteAd=function(B){var A=new RegExp(this.cookieJoinDelimiter+B.adId+this.cookieJoinDelimiter),C=(this.cookieJoinDelimiter+(this.getAdsArray().join(this.cookieJoinDelimiter))+this.cookieJoinDelimiter).replace(A,this.cookieJoinDelimiter);C=this.sanitizeCookie(C);$.cookies.set(this.cookieName,C,gumtree.state.cookieDefaults);if(C===""){gumtree.utils.eraseCookie(this.cookieName)}this.runOnDeleteOne(B);this.afterUpdate()};gumtree.GumAdManager.prototype.saveAd=function(B){var A=new RegExp(this.cookieJoinDelimiter+B+this.cookieJoinDelimiter),D=(this.cookieJoinDelimiter+(this.getAdsArray().join(this.cookieJoinDelimiter))+this.cookieJoinDelimiter).match(A);if(!D){var C=this.cookiePrefix+B+this.cookieJoinDelimiter+this.getAdsArray().join(this.cookieJoinDelimiter);C=this.sanitizeCookie(C);$.cookies.set(this.cookieName,C,gumtree.state.cookieDefaults);this.onChangeDetect.apply(this);this.afterUpdate()}};gumtree.GumAdManager_Ad=function(A){if(!(this instanceof (gumtree.GumAdManager_Ad))){return new gumtree.GumAdManager_Ad(A)}this.adId=A.adId;this.manager=A.manager;this.displaySlots=$(A.adSelector)};gumtree.GumFormInputWrapper=function(B){var A=this.input=$(B.inputField);if(!(this instanceof (gumtree.GumFormInputWrapper))){return new gumtree.GumFormInputWrapper(B)}if(A.get(0).parentNode.className!=="js_form-input form-input-wrapper"){A.wrap('<span class="js_form-input form-input-wrapper"></span>')}};gumtree.GumFormPlaceholder=function(C){var B=this;if(!(this instanceof (gumtree.GumFormPlaceholder))){return new gumtree.GumFormPlaceholder(C)}this.label=$(C.placeholder);this.stayOnFocus=this.label.data("stay-on-focus");if(!this.label.hasClass("pseudo-placeholder")){var A=$("#"+this.label.closest("label").attr("for"));this.input=A.length>0?A:$("#"+this.label.prev().attr("id"));this.placeholderFallback=$(this.input).data("fallback");this.label.show();if((this.input.attr("value").length>0)||(this.input.is(":focus"))){if(!B.stayOnFocus){B.label.hide()}}this.label.addClass("pseudo-placeholder").appendTo(this.input.parent());this.label.bind({click:function(){B.input.trigger("focus")}});this.input.bind({focus:function(){if(!B.stayOnFocus){B.label.hide()}},blur:function(){if(B.input.attr("value")===""){B.label.show()}}})}};gumtree.GumTabManager=function(B){var A=this;if(!(this instanceof (gumtree.GumTabManager))){return new gumtree.GumTabManager(B)}A.onShow=B.onShow||function(){};A.panels=$(B.panels);A.panelClosing=B.panelClosing||false;A.triggerContainers=$(B.triggerContainers);A.animInSpeed=B.animInSpeed||0;A.animOutSpeed=B.animOutSpeed||0;A.selfClosing=B.selfClosing||false;A.isAnimating=false;A.tabs=[];A.triggerContainers.each(function(){var C=new gumtree.GumTabManager_TabElement({tabElement:$(this),tabManager:A});A.tabs.push(C)})};gumtree.GumTabManager_TabElement=function(B){var A=this;A.tabManager=B.tabManager;A.tabTriggerContainer=B.tabElement;if(A.tabTriggerContainer.get(0).nodeName.toLowerCase()==="a"){A.tabTrigger=A.tabTriggerContainer}else{A.tabTrigger=A.tabTriggerContainer.find("a")}A.tabTriggerSiblings=A.tabManager.triggerContainers.filter(function(){return this!=A.tabTriggerContainer});A.targetPane=$(A.tabTrigger.attr("href"));A.isActive=this.tabTriggerContainer.hasClass("active");if(!A.isActive){A.hideTab(true)}A.tabTrigger.bind("click",function(C){A.toggleTab(C)})};gumtree.GumTabManager_TabElement.prototype.toggleTab=function(C){var A=this,B=A.tabManager;if(!B.isAnimating){A.isActive=this.tabTriggerContainer.hasClass("active");if(!A.isActive){A.showTab(false)}else{if(B.selfClosing){A.hideTab(false)}}}A.tabTrigger.blur();C.preventDefault()};gumtree.GumTabManager_TabElement.prototype.hideTab=function(B){var A=this,C=A.tabManager,D=C.animOutSpeed;if(B){D=0}A.tabTriggerContainer.removeClass("active");C.isAnimating=true;A.targetPane.fadeOut(D,function(){if(C.panelClosing){C.panels.css("visibility","hidden")}C.isAnimating=false})};gumtree.GumTabManager_TabElement.prototype.showTab=function(B){var A=this,C=A.tabManager,D=C.animInSpeed;if(B){D=0}A.targetPane.siblings(A.targetPane.get(0).nodeName).hide();A.tabTriggerSiblings.removeClass("active");A.tabTriggerContainer.addClass("active");if(C.panelClosing){C.panels.css("visibility","visible")}C.isAnimating=true;A.targetPane.fadeIn(D,function(){C.isAnimating=false;C.onShow(A.targetPane)})};gumtree.GumFormInputClearControl=function(D){var M=this,G,H=gumtree.utils.getStyle,F=gumtree.utils.events.addEvent,C=M.inputField=D.inputField,K=$(C),B=K.data("clearable"),L=(B===undefined)?true:Boolean(B),J=H(C,"marginRight"),E=M.clearInput=document.createElement("div"),I=M.inputWrapper=C.parentNode,A=(I.parentNode.className.indexOf("fluid-width")>-1);if(!(M instanceof (gumtree.GumFormInputClearControl))){return new gumtree.GumFormInputClearControl(D)}if(L===false){return false}E.className="clear-input-value";E.style.marginRight=J;I.appendChild(E);G={doClear:function(N){M.doClear()},autoState:function(){M.autoState()},prepareClearInput:function(N){$(C).closest(".form-component").addClass("do-not-validate")}};F(M.clearInput,"mousedown",G.prepareClearInput);F(M.clearInput,"click",G.doClear);F(M.inputField,"keyup",G.autoState);F(M.inputField,"focus",G.autoState);M.autoState()};gumtree.GumFormInputClearControl.prototype.hide=function(){this.clearInput.style.display="none"};gumtree.GumFormInputClearControl.prototype.show=function(){this.clearInput.style.display="block"};gumtree.GumFormInputClearControl.prototype.autoState=function(){if(this.inputField.value.length<1){this.hide()}else{this.show()}};gumtree.GumFormInputClearControl.prototype.doClear=function(){var A=this.inputField,B=$(A).closest(".form-component");A.value="";A.focus();this.autoState();$(A).trigger("onClear");setTimeout(function(){B.removeClass("do-not-validate")},10)};gumtree.GumFormSelectComponent=function(C){var B=this,A;if(!(this instanceof (gumtree.GumFormSelectComponent))){return new gumtree.GumFormSelectComponent(C)}this.selectElement=C.selectElement;this.selectElement.style.webkitAppearance="none";this.selectElement.style.mozAppearance="none";A=this.selectElement.parentNode;this.selectContainer=document.createElement("span");this.selectContainer.className="pseudo-select";var D=document.createElement("div");D.className="pseudo-select-indicator";D.style.pointerEvents="none";if(!gumtree.features.pointerEventsSupported){D.style.visibility="hidden"}this.selectContainer.appendChild(D);A.insertBefore(this.selectContainer,this.selectElement);this.selectContainer.appendChild(this.selectElement)};gumtree.GumSavedSearchManager=function(A){if(!(this instanceof (gumtree.GumSavedSearchManager))){return new GumSavedSearchManager(A)}this.settings={cookieName:"gt_ss",savedSearchContainer:"#my-saved-searches-container",savedSearchList:".saved-searches",savedSearchSelectorPrefix:".js_saved-searches .js_ss-",totalCountSelector:".total-saved-searches",savedSearchRemoveSelector:".js_remove-saved-search",savedSearchRemoveAllSelector:".clear-saved-searches",savedSearchSaveSelector:".ad-save-search",maxCount:6};$.extend(this.settings,A);this.setup()};gumtree.GumSavedSearchManager.prototype.setup=function(){var A=this;this.savedSearches=this.getSavedSearchesArray();$(this.settings.savedSearchRemoveSelector).unbind("click.GumSavedSearchManager").bind("click.GumSavedSearchManager",function(B){B.preventDefault();var C=$(this);console.log("/mysavedsearches/{savedsearchId}/delete".replace("{savedsearchId}",C.data("id")));$.get("/mysavedsearches/{savedsearchId}/delete".replace("{savedsearchId}",C.data("id")),function(){var D=$("#"+this.url.split("/")[2]);D.closest(".saved-search").slideUp(300,function(){D.remove()})})});$(this.settings.savedSearchSaveSelector).unbind("click.GumSavedSearchManager").bind("click.GumSavedSearchManager",function(F){F.preventDefault();var H=$(this),E=H.attr("href");if(E){var B="q=&category=";var D="&search_location=";if(location.search.length>0){var G=escape(location.search.substr(1))}else{if(location.href.split("/").length==5){var G=B+location.href.split("/")[3]+D+location.href.split("/")[4]}else{if(location.href.split("/").length==4){var G=B+location.href.split("/")[3]}}}isEmailAlert="false";location.href=E.replace("{savedSearchRequest}",G).replace("{isEmailAlert}",isEmailAlert)}else{var C=$(this).data();if(C.url&&!A.getSavedSearch(C.url)){A.addSavedSearch(C);A.updateSaveButtonSaved()}else{A.deleteSavedSearch(C);A.updateSaveButtonNotSaved()}}});$(this.settings.savedSearchSaveSelector).each(function(){var B=A.getSavedSearch($(this).data("url"));if(B){A.updateSaveButtonSaved()}else{A.updateSaveButtonNotSaved()}});$(this.settings.savedSearchRemoveAllSelector).unbind("click.GumSavedSearchManager").bind("click.GumSavedSearchManager",function(B){B.preventDefault();A.removeAll()});this.updateCount()};gumtree.GumSavedSearchManager.prototype.updateSaveButtonSaved=function(){$(this.settings.savedSearchSaveSelector).addClass("disabled").text("Search saved").attr("title","Remove Saved Search")};gumtree.GumSavedSearchManager.prototype.updateSaveButtonNotSaved=function(){$(this.settings.savedSearchSaveSelector).removeClass("disabled").text("Save this search").attr("title","Save this search")};gumtree.GumSavedSearchManager.prototype.getSavedSearch=function(A){for(var B=0;B<this.savedSearches.length;B+=1){if(this.savedSearches[B].url===A){return this.savedSearches[B]}}return false};gumtree.GumSavedSearchManager.prototype.getSavedSearchesArray=function(){var A=this;if($.cookies.get(A.settings.cookieName)){return $.cookies.get(A.settings.cookieName)}return[]};gumtree.GumSavedSearchManager.prototype.updateCount=function(){var A=this;$(this.settings.totalCountSelector).each(function(){$(this).text(A.savedSearches.length)})};gumtree.GumSavedSearchManager.prototype.deleteSavedSearch=function(A){return ;var B=this.savedSearches;var E=[];for(var C=0;C<B.length;C++){if(B[C].url!==A.url){E.push(B[C])}}var D=JSON.stringify(E);this.savedSearches=E;$.cookies.set(this.settings.cookieName,D,gumtree.state.cookieDefaults);if(D===""){gumtree.utils.eraseCookie(this.settings.cookieName)}this.updateCount()};gumtree.GumSavedSearchManager.prototype.addSavedSearch=function(B){if(this.savedSearches.length>=this.settings.maxCount){this.savedSearches.splice(0,1)}if(!this.getSavedSearch(B.url)){var A={url:B.url,categoryName:B["categoryName"],locationName:B["locationName"],searchTerms:B["searchTerms"]};this.savedSearches.push(A);$.cookies.set(this.settings.cookieName,JSON.stringify(this.savedSearches),gumtree.state.cookieDefaults);this.updateCount()}};gumtree.GumSavedSearchManager.prototype.removeAll=function(){var A=this;this.savedSearches=[];this.updateCount();$(this.settings.savedSearchRemoveAllSelector).remove();gumtree.utils.eraseCookie(this.settings.cookieName);$(this.settings.savedSearchList).slideUp(300,function(){$(A.settings.savedSearchContainer).find("h2").text("No saved searches (You can save up to 6 searches)").after($("<p>",{"text":"If you save any search, it will show up here.","css":{"display":"none"}}).fadeIn(300));$(A.settings.savedSearchList).remove()})};gumtree.init.global.nuggAd=function(){if(gumtree.state.nuggAd){var A=document.createElement("script");A.type="text/javascript";A.async=true;A.src=gumtree.state.nuggAd;var B=document.getElementsByTagName("script")[0];B.parentNode.insertBefore(A,B)}};gumtree.state.cookieDefaults={domain:gumtree.state.domain,path:"/",expiresAt:new Date(2020,1,12)};gumtree.init.global.yourGumtreeMenu=function(){return new gumtree.GumMenuDropdown({el:"#your-gumtree-dropdown-menu",convertHoversToClicks:true,positionChildrenInCenter:true,autoCloseDelay:1500,padXPos:-62})};gumtree.init.global.typeAhead=function(){var A=[];$(".search-extended-location").each(function(){A.push(new gumtree.GumAutoComplete({field:this,service:"/ajax/location/",serviceSuffix:".json",resultsKeyWrapper:"locationList",resultsKey:"name",divWrapperName:"js_location-type-ahead",divItemWrapperName:"js_location-type-ahead-item",highlightClass:"js_highlight",buildQuery:function(B){return this.service+B+this.serviceSuffix}}))})};gumtree.init.global.yourGumtreeFooter=function(){return new gumtree.GumTabManager({triggerContainers:"#your-gumtree-view-triggers>li",panels:"#your-gumtree-view-panel",animInSpeed:200,animOutSpeed:200})};gumtree.init.global.doFormPlaceholders=function(){if(!gumtree.state.formPlaceholders){gumtree.state.formPlaceholders=[]}$(".placeholder").each(function(){if(!gumtree.utils.inArray(this,gumtree.state.formPlaceholders)){gumtree.state.formPlaceholders.push(new gumtree.GumFormPlaceholder({placeholder:$(this)}))}});return gumtree.state.formPlaceholders};gumtree.init.global.replaceSelects=function(){if(!gumtree.state.replacedSelects){gumtree.state.replacedSelects=[]}var A=gumtree.utils.get("","select").concat(gumtree.utils.get("medium","select"),gumtree.utils.get("form-control","select")),B=A.length,C;for(var D=0;D<B;D++){C=A[D];if(!gumtree.utils.inArray(C,gumtree.state.replacedSelects)){gumtree.state.replacedSelects.push(new gumtree.GumFormSelectComponent({"selectElement":C}))}}return gumtree.state.replacedSelects};gumtree.init.global.formInputClearControls=function(){if(!gumtree.state.formInputClearControls){gumtree.state.formInputClearControls=[]}var A=[document.getElementById("q")];$("form input[type=text],form input[type=password]").each(function(){if(!gumtree.utils.inArray(this,gumtree.state.formInputClearControls)){if($.inArray(this,A)===-1){gumtree.state.formInputClearControls.push(new gumtree.GumFormInputClearControl({inputField:this}))}}})};gumtree.init.global.doFormInputWrappers=function(){if(!gumtree.state.doFormInputWrappers){gumtree.state.doFormInputWrappers=[]}var B=[];var A=gumtree.utils.hasClass(document.documentElement,"ie");if(!A){var B=[document.getElementById("search-bar_search-terms-detailed"),document.getElementById("search-bar_search-location-detailed")]}$("form input[type=text],form input[type=password]").each(function(){if(!gumtree.utils.inArray(this,gumtree.state.doFormInputWrappers)){if($.inArray(this,B)===-1){gumtree.state.doFormInputWrappers.push(new gumtree.GumFormInputWrapper({inputField:this}))}}});if(A){$("#search-bar_search-terms-detailed, #search-bar_search-location-detailed, #search-bar-small_search-terms-detailed, #search-bar-small_search-location-detailed, #vlp_search-terms-detailed, #vlp_search-location-detailed").each(function(){var C=$(this).attr("placeholder");$(this).parent().append('<em class="placeholder">'+C+"</em>")})}};gumtree.init.global.savedAds=function(){gumtree.state.savedAds=new gumtree.GumAdManager({statusSelector:"#mad-filter-_filter-ads-status",parentStatuses:new Array("ACTIVE_ADS","INACTIVE_ADS"),fragmentService:"/ajax/savedads.html",cookieName:"saved_ids",cookieSplitDelimiter:/[\s\+]/,cookieJoinDelimiter:" ",adSelectorPrefix:".js_saved-ads .js_ad-",totalCountSelector:".total-saved-ads",adSaveSelector:".js_save-ad",adRemoveSelector:".js_remove-saved-ad",adRemoveAllSelector:".clear-saved-ads",onChangeDetect:function(C){if(this.ajaxRequest){this.ajaxRequest.abort()}var B=this,E=$("#your-gumtree-your-saved-ads section div"),A=$("#your-gumtree-saved"),F=$("#my-saved-ads-container"),D=new Date().getTime();this.ajaxRequest=$.ajax({type:"GET",url:B.fragmentService+"?r="+D,beforeSend:function(G){},success:function(I,G,J){var H=document.createElement("div");H.setAttribute("id","js_saved_ads_tmp");if(window.innerShiv){H.appendChild(innerShiv(I))}else{H.innerHTML=I}E.html($(H).find("#header-saved-ads").html());A.html($(H).find("#your-gumtree-saved").html());if(C){F.html($(H).find("#my-saved-ads-container").html())}B.setup();delete B.ajaxRequest},dataType:"html"})},onDeleteOne:function(B){var A=this;this.callback=B;$(this).addClass("js_isDeleting");$(this).fadeOut("200",function(){$(this).remove();A.callback()})}});return gumtree.state.savedAds};gumtree.init.global.recentAds=function(){gumtree.state.recentAds=new gumtree.GumAdManager({fragmentService:"/ajax/recentlyviewedads.html",cookieName:"recent_ids",cookieSplitDelimiter:/[\s\+]/,cookieJoinDelimiter:" ",cookiePrefix:"1337:",adSelectorPrefix:".js_recent-ads .js_ad-",adRemoveAllSelector:".clear-recent-ads",onChangeDetect:function(){if(this.ajaxRequest){this.ajaxRequest.abort()}var A=this,C=$("#your-gumtree-recently-viewed"),B=new Date().getTime();this.ajaxRequest=$.ajax({url:A.fragmentService+"?r="+B,success:function(E){var D=document.createElement("div");D.setAttribute("id","js_saved_ads_tmp");if(window.innerShiv){D.appendChild(innerShiv(E))}else{D.innerHTML=E}C.html($(D).find("#your-gumtree-recently-viewed").html());A.setup();delete A.ajaxRequest},dataType:"html"})}});return gumtree.state.recentAds};gumtree.init.global.savedSearches=function(){gumtree.state.savedSearches=new gumtree.GumSavedSearchManager();return gumtree.state.savedSearches};gumtree.init.global.seoFooter=function(){return new gumtree.GumTabManager({triggerContainers:"#seo-links .triggers li",panels:"#seo-panels",animInSpeed:200,animOutSpeed:200,selfClosing:true,panelClosing:true})};gumtree.init.global.iframeDomReady=function(){$('iframe[src=""]').each(function(){var A=$(this);if(!A.data("on-demand")&&A.css("visibility")!="hidden"&&A.css("display")!="none"){A.attr("src",A.attr("iframe-src"))}})};gumtree.init.global.adsenseTrack=function(){$(".adsense_ad a").each(function(){$(this).click(function(){$("#mediaplex-iframe").attr("src",gumtree.state.mediaplexUrl)})})};gumtree.init.global.incrementViewCount=function(){if(gumtree.state.viewcountUpdateUrl){$.ajax(gumtree.state.viewcountUpdateUrl)}};gumtree.init.global.selectAlls=function(){$('.js_select-all-trigger input[type="checkbox"]').each(function(){var B=$(this),A=$("."+B.data("scope")+':not(.exclude)  input[type="checkbox"]');if(A.length===0){B.hide()}A.bind("change",function(){if(!$(this).attr("checked")){B.removeAttr("checked")}});B.bind("change",function(){var C=(B.attr("checked"));if(C){A.each(function(){var E=$(this),D=E.attr("disabled");if(D!=true&&D!="disabled"&&E.is(":visible")){E.attr("checked",true);E.trigger("change")}});B.trigger("onSelectAll")}else{A.each(function(){var E=$(this),D=E.attr("disabled");if(D!=true&&D!="disabled"&&E.is(":visible")){E.removeAttr("checked");E.trigger("change")}});A.removeAttr("checked");B.trigger("onUnselectAll")}})})};gumtree.init.global.errorMessageAnchorSubmit=function(){var A=[{"linkText":"continue","targetSubmit":"#login_submit-log-in"},{"linkText":"manually select your location","targetSubmit":"#location_manual_selection_mode"}],B=".form-component-error .error";$(A).each(function(E){var F=this,C=$(B+' a[href="#"]'),G=$(F.targetSubmit),D=G.length;if(D&&C.text()===F.linkText){C.unbind("click.errorMessageAnchorSubmit").bind("click.errorMessageAnchorSubmit",function(){G.trigger("click")})}})};gumtree.init.global.isMobile=function(){if(/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)){var A={};switch(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Firefox/i.exec(navigator.userAgent)[0]){case"Android":A.Android=true;break;case"webOS":A.webOS=true;break;case"iPhone":A.iPhone=true;A.iOS=true;break;case"iPad":A.iPad=true;A.iOS=true;break;case"iPod":A.iPod=true;A.iOS=true;break;case"BlackBerry":A.BlackBerry=true;break}A.noFileBrowse=(A.iOS&&/\sOS\s[1-5]/.test(navigator.userAgent))?true:false;return A}else{return false}};gumtree.init.global.startSuccessFeed=function(){var A=A||$(".success-feed-banner"),D={bmw:false,mg:true,ldv:true,suv:true},E=function(I){if(typeof I=="string"&&I.toUpperCase()!="NULL"){I=I.replace("_"," ").split(" ");for(var H=0,F=I.length;H<F;++H){var G=I[H];I[H]=(G.toLowerCase() in D)?G.toUpperCase():G.charAt(0).toUpperCase()+G.slice(1)}return I.join(" ")}else{return"something"}},C=function(G){var F="a";if(typeof G=="string"){G=G.toLowerCase();switch(G.charAt(0)){case"a":case"e":case"i":case"o":case"u":F="an";break;default:if(D[G.split(" ")[0]]){F="an"}break}}else{F=""}return F};if(A.length){var B=function(G){var F=setInterval(function(){if(G.length){var K=G.shift(),J=(Math.random()>0.5)?"Success!":"Boom!",I=(!K.contactName)?"Someone":(typeof K.contactName=="string")?(K.contactName.toUpperCase()=="NULL")?"Someone":(K.contactName.charAt(0).toUpperCase()+K.contactName.slice(1)):"Someone",H=(!!K.carName)?C(K.carName)+" <strong>"+E(K.carName):"something in <strong>"+K.categoryName,L=(J+" <strong>"+I+"</strong> just sold "+H+((!!K.location)?"</strong> in <strong>"+K.location+"</strong>":"</strong>"));A.fadeOut(function(){A.html(L).fadeIn({})})}else{clearInterval(F);gumtree.init.global.startSuccessFeed()}},5000)};$.get("/report/gumtreeSuccess",function(F){if(F.length){B(F)}})}};gumtree.init.global.pollFacebookLikeBtn=function(){var A=setInterval(function(){if(typeof FB!="undefined"){clearInterval(A);FB.Event.subscribe("xfbml.render",function(B){if(B==1){setTimeout(function(){var D=$(".fb-like"),C={height:"20px",width:"88px"};D.css("display","inline-block");D.find("span").css(C);D.find("iframe").css(C)},200)}})}},100)};gumtree.init.global.setSubNavClickDropDown=function(){var A;$(".my-gt").removeAttr("href");$(".toggle-subnav").on("click",function(B){A(B,this)}).on("mouseleave",function(){var B=$(this),C=B.find(".header-subnav");if(C.is(":visible")){C.hide()}}).on("mouseenter",function(){var B=$(this),C=B.find(".header-subnav");C.attr("style","")});A=function(D,B){var C=$(B).find(".header-subnav");if(D.target.className==="header-subnav--link"){return }if(C.is(":visible")){C.hide()}else{C.show()}}};gumtree.init.global.makeModelLoad=function(){var A=function(D){var C=$("#vehicle_model");C.find("option:gt(0)").remove();if(D&&D!==""){C.find("option:first").text("Loading...");$.ajax({url:"/lookups/cars/"+D+"/models"}).done(function(H){$("#vehicle_model").find("option:first").text("Any");var E=H.length;for(var G=0;G<E;G++){var F=$("<option/>").attr("value",H[G]["value"]);if(gumtree.utils.getUrlVars()["vehicle_model"]===H[G]["value"]){F.attr("selected",true)}F.text(H[G]["text"]).appendTo(C)}})}};var B=function(){A($("#vehicle_make option:selected").val())};$("#vehicle_make").change(B);B()};gumtree.init.global.radialSearchDropDown=function(){$(".search-extended-location").on("keyup",function(){gumtree.init.global.searchPostcode()})};gumtree.init.global.radialTooltip=function(){var B=$(".search-extended-location"),C='Enter a postcode to use <span>our NEW distance search</span><div class="stripe"></div>';C+='<div class="tooltip-arrow"></div>';var A=new gumtree.GumRadialTooltip({trigger:B.get(0),tooltipTimeoutDelay:150,zIndex:12,className:"radialtooltip-class",content:C,subTooltip:false})};gumtree.init.global.searchPostcode=function(){var A=/^[A-Z]{1,2}[0-9]{1,2} ?[0-9][A-Z]{2}$/i;var C=$(".search-extended-location").val()||false;var B=".search-dist-detailed select";if(!C){return false}C=C.replace(/\s/g,"");if(C.match(A)){var D=gumtree.init.global.searchDistance()||"10.0";$(B+" option[value='"+D+"']").prop("selected",true);$(B).prop("disabled",false);$(B).removeClass("optdisabled")}else{$(B+" option[value='0.0']").prop("selected",true);$(B).prop("disabled","disabled");$(B).addClass("optdisabled")}};gumtree.init.global.searchDistance=function(){return gumtree.init.global.urlParameter("distance")||gumtree.init.global.urlParameter("current-distance")};gumtree.init.global.urlParameter=function(E){var A=window.location.search.substring(1),B,D,C=A.split("&");for(B=0;B<C.length;B++){D=C[B].split("=");if(D[0]==E){return decodeURIComponent(D[1])}}return null};window.fbAsyncInit=function(){FB.init({appId:"206144109506296",channelUrl:"//www.gumtree.com/",status:true,cookie:true,xfbml:true})};(function(C){var B,D="facebook-jssdk",A=C.getElementsByTagName("script")[0];if(C.getElementById(D)){return }B=C.createElement("script");B.id=D;B.async=true;B.src="//connect.facebook.net/en_US/all.js";A.parentNode.insertBefore(B,A)}(document));gumtree.init.global._onDomReady=(function(){var A=gumtree.init.global;A.pollFacebookLikeBtn();A.doFormInputWrappers();A.doFormPlaceholders();A.nuggAd();A.incrementViewCount();A.replaceSelects();A.yourGumtreeMenu();A.typeAhead();A.iframeDomReady();A.selectAlls();A.errorMessageAnchorSubmit();A.yourGumtreeFooter();A.savedAds();A.recentAds();A.startSuccessFeed();A.savedSearches();A.seoFooter();A.adsenseTrack();A.setSubNavClickDropDown();A.makeModelLoad();A.radialSearchDropDown();A.searchPostcode()});domReady(function(){gumtree.init.global._onDomReady()});(function(){var A=document.createElement("script");A.type="text/javascript";A.async=true;A.src="https://apis.google.com/js/plusone.js";var B=document.getElementsByTagName("script")[0];B.parentNode.insertBefore(A,B)})();(function(C){var A=C.getElementsByTagName("SCRIPT")[0],B=C.createElement("SCRIPT");B.type="text/javascript";B.async=true;B.src="//assets.pinterest.com/js/pinit.js";A.parentNode.insertBefore(B,A)}(document));!function(D,A,E){var C,B=D.getElementsByTagName(A)[0];if(!D.getElementById(E)){C=D.createElement(A);C.id=E;C.src="//platform.twitter.com/widgets.js";B.parentNode.insertBefore(C,B)}}(document,"script","twitter-wjs")